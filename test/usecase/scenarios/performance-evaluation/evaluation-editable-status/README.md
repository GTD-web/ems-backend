# 성과 평가 수정가능 상태 변경 시나리오

## 식별된 검증해야하는 시나리오

각 하이라키별 시나리오 엔드포인트 순서대로 검증이 되어야 함.

사용되는 컨트롤러
- performance-evaluation
- dashboard

- **평가 수정가능 상태 변경 및 대시보드 반영 검증**
    - POST /admin/evaluation-periods (평가기간 생성)
    - POST /admin/evaluation-periods/{id}/start (평가기간 시작)
    - **평가기간-직원 맵핑 ID 조회**
        - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
            - 응답 배열에서 해당 직원 정보 조회
            - mappingId 필드 확인
            - 초기 editableStatus 값 확인
                - evaluationPeriod.editableStatus 객체 존재 확인
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인 (기본값)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인 (기본값)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인 (기본값)
    - **자기평가 수정가능 상태 변경 검증**
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=self&isEditable=true (자기평가 수정가능으로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSelfEvaluationEditable이 true로 변경되었는지 확인
            - 응답에서 isPrimaryEvaluationEditable와 isSecondaryEvaluationEditable은 변경되지 않았는지 확인 (독립적 변경)
        - **대시보드 전체 직원 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - 응답 배열에서 해당 직원 정보 조회
                - **evaluationPeriod.editableStatus 객체 검증**
                    - evaluationPeriod.editableStatus 객체 존재 확인
                    - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                    - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
                    - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - **개별 직원 평가기간 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - employeeId 확인
                - **evaluationPeriod.editableStatus 객체 검증**
                    - evaluationPeriod.editableStatus 객체 존재 확인
                    - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                    - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
                    - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - **직원 할당 데이터 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - employeeId 확인
                - **editableStatus 객체 검증 (최상위 레벨)**
                    - editableStatus 객체 존재 확인
                    - editableStatus.isSelfEvaluationEditable이 true인지 확인
                    - editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
                    - editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=self&isEditable=false (자기평가 수정불가로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSelfEvaluationEditable이 false로 변경되었는지 확인
        - **대시보드 전체 직원 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인
        - **개별 직원 평가기간 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인
        - **직원 할당 데이터 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 false인지 확인
    - **1차평가 수정가능 상태 변경 검증**
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=primary&isEditable=true (1차평가 수정가능으로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isPrimaryEvaluationEditable이 true로 변경되었는지 확인
            - 응답에서 isSelfEvaluationEditable와 isSecondaryEvaluationEditable은 변경되지 않았는지 확인 (독립적 변경)
        - **대시보드 전체 직원 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - **개별 직원 평가기간 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - **직원 할당 데이터 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - editableStatus.isSecondaryEvaluationEditable가 변경되지 않았는지 확인
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=primary&isEditable=false (1차평가 수정불가로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isPrimaryEvaluationEditable이 false로 변경되었는지 확인
        - **대시보드 전체 직원 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인
        - **개별 직원 평가기간 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인
        - **직원 할당 데이터 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isPrimaryEvaluationEditable이 false인지 확인
    - **2차평가 수정가능 상태 변경 검증**
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=secondary&isEditable=true (2차평가 수정가능으로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSecondaryEvaluationEditable이 true로 변경되었는지 확인
            - 응답에서 isSelfEvaluationEditable와 isPrimaryEvaluationEditable은 변경되지 않았는지 확인 (독립적 변경)
        - **대시보드 전체 직원 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
        - **개별 직원 평가기간 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
        - **직원 할당 데이터 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSecondaryEvaluationEditable이 true인지 확인
                - editableStatus.isSelfEvaluationEditable가 변경되지 않았는지 확인
                - editableStatus.isPrimaryEvaluationEditable가 변경되지 않았는지 확인
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=secondary&isEditable=false (2차평가 수정불가로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSecondaryEvaluationEditable이 false로 변경되었는지 확인
        - **대시보드 전체 직원 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인
        - **개별 직원 평가기간 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인
        - **직원 할당 데이터 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSecondaryEvaluationEditable이 false인지 확인
    - **전체 평가 수정가능 상태 일괄 변경 검증**
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=all&isEditable=true (전체 평가 수정가능으로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSelfEvaluationEditable, isPrimaryEvaluationEditable, isSecondaryEvaluationEditable이 모두 true로 변경되었는지 확인
        - **대시보드 전체 직원 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인
        - **개별 직원 평가기간 현황 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인
        - **직원 할당 데이터 조회 검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 true인지 확인
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - editableStatus.isSecondaryEvaluationEditable이 true인지 확인
        - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=all&isEditable=false (전체 평가 수정불가로 변경)
            - HTTP 200 응답 확인
            - 응답에서 isSelfEvaluationEditable, isPrimaryEvaluationEditable, isSecondaryEvaluationEditable이 모두 false로 변경되었는지 확인
        - **대시보드 전체 직원 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인
        - **개별 직원 평가기간 현황 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId} (개별 직원 평가기간 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인
        - **직원 할당 데이터 조회 재검증**
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 false인지 확인
                - editableStatus.isPrimaryEvaluationEditable이 false인지 확인
                - editableStatus.isSecondaryEvaluationEditable이 false인지 확인
    - **순차적 상태 변경 및 대시보드 일관성 검증**
        - **1단계: 자기평가만 수정가능 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=self&isEditable=true
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인 (기본값)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인 (기본값)
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 true인지 확인
                - editableStatus.isPrimaryEvaluationEditable이 false인지 확인 (기본값)
                - editableStatus.isSecondaryEvaluationEditable이 false인지 확인 (기본값)
        - **2단계: 1차평가 추가 수정가능 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=primary&isEditable=true
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인 (유지)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인 (기본값)
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 true인지 확인 (유지)
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인
                - editableStatus.isSecondaryEvaluationEditable이 false인지 확인 (기본값)
        - **3단계: 2차평가 추가 수정가능 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=secondary&isEditable=true
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인 (유지)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인 (유지)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 true인지 확인 (유지)
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인 (유지)
                - editableStatus.isSecondaryEvaluationEditable이 true인지 확인
        - **4단계: 순차적 잠금 - 자기평가 수정불가 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=self&isEditable=false
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인 (유지)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인 (유지)
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 false인지 확인
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인 (유지)
                - editableStatus.isSecondaryEvaluationEditable이 true인지 확인 (유지)
        - **5단계: 순차적 잠금 - 1차평가 수정불가 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=primary&isEditable=false
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인 (유지)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 true인지 확인 (유지)
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 false인지 확인 (유지)
                - editableStatus.isPrimaryEvaluationEditable이 false인지 확인
                - editableStatus.isSecondaryEvaluationEditable이 true인지 확인 (유지)
        - **6단계: 순차적 잠금 - 2차평가 수정불가 설정**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId}?evaluationType=secondary&isEditable=false
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인 (유지)
                - evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 false인지 확인 (유지)
                - evaluationPeriod.editableStatus.isSecondaryEvaluationEditable이 false인지 확인
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId}/assigned-data (직원 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 false인지 확인 (유지)
                - editableStatus.isPrimaryEvaluationEditable이 false인지 확인 (유지)
                - editableStatus.isSecondaryEvaluationEditable이 false인지 확인
    - **여러 직원의 상태 변경 및 대시보드 일관성 검증**
        - **직원 1의 상태 변경**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId1}?evaluationType=self&isEditable=true
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - 직원 1의 evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인
                - 직원 2의 evaluationPeriod.editableStatus.isSelfEvaluationEditable이 false인지 확인 (기본값, 변경되지 않음)
        - **직원 2의 상태 변경**
            - PATCH /admin/performance-evaluation/evaluation-editable-status/{mappingId2}?evaluationType=primary&isEditable=true
            - GET /admin/dashboard/{evaluationPeriodId}/employees/status (대시보드 전체 직원 현황 조회)
                - 직원 1의 evaluationPeriod.editableStatus.isSelfEvaluationEditable이 true인지 확인 (유지)
                - 직원 2의 evaluationPeriod.editableStatus.isPrimaryEvaluationEditable이 true인지 확인
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId1}/assigned-data (직원 1 할당 데이터 조회)
                - editableStatus.isSelfEvaluationEditable이 true인지 확인 (직원 1 설정 유지)
            - GET /admin/dashboard/{evaluationPeriodId}/employees/{employeeId2}/assigned-data (직원 2 할당 데이터 조회)
                - editableStatus.isPrimaryEvaluationEditable이 true인지 확인 (직원 2 설정 반영)
