{
  "timestamp": "2025-11-15T14:59:16.007Z",
  "testResults": [
    {
      "testName": "가드가 정의되어야 한다",
      "result": {
        "success": true,
        "message": "RolesGuard가 정상적으로 생성되었습니다."
      }
    },
    {
      "testName": "@Roles() 데코레이터가 없으면 통과한다",
      "result": {
        "success": true,
        "requiredRoles": null,
        "canActivate": true
      }
    },
    {
      "testName": "필요한 역할이 빈 배열이면 통과한다",
      "result": {
        "success": true,
        "requiredRoles": [],
        "canActivate": true
      }
    },
    {
      "testName": "사용자가 필요한 역할을 가지고 있으면 통과한다 (admin이 아닌 경우)",
      "result": {
        "success": true,
        "requiredRoles": [
          "user"
        ],
        "userRoles": [
          "admin",
          "user"
        ],
        "canActivate": true,
        "accessibilityCheckCalled": false
      }
    },
    {
      "testName": "사용자가 여러 역할 중 하나라도 가지고 있으면 통과한다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin",
          "manager"
        ],
        "userRoles": [
          "admin",
          "user"
        ],
        "canActivate": true,
        "accessibilityCheckCalled": true,
        "isAccessible": true
      }
    },
    {
      "testName": "사용자가 필요한 역할을 가지고 있지 않으면 ForbiddenException을 던진다",
      "result": {
        "success": true,
        "requiredRoles": [
          "super-admin"
        ],
        "userRoles": [
          "admin",
          "user"
        ],
        "errorThrown": true,
        "errorMessage": "이 작업을 수행할 권한이 없습니다. 필요한 역할: super-admin"
      }
    },
    {
      "testName": "사용자 역할이 빈 배열이면 ForbiddenException을 던진다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin"
        ],
        "userRoles": [],
        "errorThrown": true
      }
    },
    {
      "testName": "사용자 정보가 없으면 ForbiddenException을 던진다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin"
        ],
        "user": null,
        "errorThrown": true,
        "errorMessage": "인증 정보가 없습니다."
      }
    },
    {
      "testName": "admin 역할이 필요한 경우, 접근 가능한 사용자는 통과한다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin"
        ],
        "userRoles": [
          "admin"
        ],
        "employeeNumber": "E2023001",
        "isAccessible": true,
        "canActivate": true,
        "accessibilityCheckCalled": true
      }
    },
    {
      "testName": "admin 역할이 필요한 경우, 접근 불가능한 사용자는 ForbiddenException을 던진다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin"
        ],
        "userRoles": [
          "admin"
        ],
        "employeeNumber": "E2023001",
        "isAccessible": false,
        "errorThrown": true,
        "errorMessage": "시스템 접근 권한이 없습니다. 관리자에게 문의하세요.",
        "accessibilityCheckCalled": true
      }
    },
    {
      "testName": "admin 역할이 필요하지만 사용자가 admin 역할을 가지고 있지 않으면 접근 가능 여부 확인을 하지 않는다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin"
        ],
        "userRoles": [
          "user"
        ],
        "errorThrown": true,
        "accessibilityCheckCalled": false
      }
    },
    {
      "testName": "admin 역할이 필요하지 않은 경우, 접근 가능 여부 확인을 하지 않는다",
      "result": {
        "success": true,
        "requiredRoles": [
          "user"
        ],
        "userRoles": [
          "user"
        ],
        "canActivate": true,
        "accessibilityCheckCalled": false
      }
    },
    {
      "testName": "admin 역할이 필요한 경우, 여러 역할 중 admin이 포함되어 있으면 접근 가능 여부를 확인한다",
      "result": {
        "success": true,
        "requiredRoles": [
          "admin",
          "manager"
        ],
        "userRoles": [
          "admin",
          "manager",
          "user"
        ],
        "employeeNumber": "E2023001",
        "isAccessible": true,
        "canActivate": true,
        "accessibilityCheckCalled": true
      }
    }
  ]
}